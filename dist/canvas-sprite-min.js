!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):window.cs=t()}(function(){"use strict";"use script";var t=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();!function(t){!function(t){!function(t){function e(t,i,r){for(var o,c=t.children,u=0,a=c.length,s=0,h=0;u<a;)e(o=c[u],s,h),s=Math.max(o.height+o.y,s),h=Math.max(o.width+o.x,h),u++;t.contentHeight=s,t.contentWidth=h,t.onMeasure(t.width,t.height),n(t,i,r)}function n(t,e,n){var i=t.y||0,r=t.x||0,o=r+t.width,c=i+t.height;t.y=i,t.x=r,t.onLayout(i,r,o,c)}function i(t,e){t.visibility&&(e.save(),e.strokeStyle="transparent",e.beginPath(),e.translate(t.x,t.y),e.scale(t.scaleX,t.scaleY),e.translate(t.originX,t.originY),e.rotate(t.rotate),e.translate(-t.originX,-t.originY),e.rect(0,0,t.width,t.height),e.stroke(),e.closePath(),e.clip(),e.save(),t.onDraw(e),e.restore(),t.children.forEach(function(t){i(t,e)}),e.restore())}t.paint=function(t){var n,r=t.children,o=(r.length,t.canvasContext);e(n=r[0],0,0),o.clearRect(0,0,t.width,t.height),i(n,o)}}(t.Painter||(t.Painter={}))}(t.paint||(t.paint={}))}(e||(e={}));!function(t){!function(t){function e(t){return"boolean"==typeof t?t:t.capture}function n(t){var n=e(t),i=!1,r=!1;return"object"==typeof t&&(i=!!t.once,r=!!t.passive),{capture:n,once:i,passive:r}}var i=function(){function t(t,e,n){this.$capture=!1,this.$passive=!1,this.$once=!1,this.$removed=!1,this.$type=t,this.$callback=e,n=n||{passive:!1,once:!1,capture:!1},this.$passive=!!n.passive,this.$once=!!n.once,this.$capture=!!n.capture}return Object.defineProperty(t.prototype,"type",{get:function(){return this.$type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"callback",{get:function(){return this.$callback},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"capture",{get:function(){return this.$capture},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"passive",{get:function(){return this.$passive},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"once",{get:function(){return this.$once},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"removed",{get:function(){return this.$removed},set:function(t){this.$removed=t},enumerable:!0,configurable:!0}),t.prototype.handleEvent=function(t){t.type!=this.$type||this.$removed||this.$callback.call(null,t)},t}(),r=function(){function t(){this.$eventListeners=[]}return t.prototype.addEventListener=function(t,e,r){if(null!=e){var o,c=this.$eventListeners,u=0,a=c.length;for(r=n(r);u<a;){if((o=c[u]).type===t&&o.callback===e&&o.capture===r.capture)return;u++}c.push(new i(t,e,r))}},t.prototype.removeEventListener=function(t,n,i){if(null!=n){var r,o=this.$eventListeners,c=0,u=o.length;for(i=e(i);c<u;)(r=o[c]).type===t&&r.callback===n&&r.capture===i?(o.splice(c,1),r.removed=!0,u--):c++}},t.prototype.dispatchEvent=function(t){return this.$eventListeners.forEach(function(e){e.handleEvent(t)}),t.cancelable&&t.defaultPrevented},t}();t.EventTarget=r}(t.event||(t.event={}))}(e||(e={}));!function(e){!function(n){function i(t,e){var n=document.createElement("canvas");return n.height=e,n.width=t,n}var r=function(n){function r(t,e){var r=n.call(this)||this;r.$running=!1,r.$container=t;var o=(e=e||{}).height||t.clientHeight,c=e.width||t.clientWidth;return r.$canvas=i(c,o),r.$height=o,r.$width=c,r.$canvasContext=r.$canvas.getContext("2d"),r.onCreate(),r}return t(r,n),Object.defineProperty(r.prototype,"canvasContext",{get:function(){return this.$canvasContext},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"children",{get:function(){return this.$children},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.$height},set:function(t){this.$canvas.height=t,this.$height=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this.$width},set:function(t){this.$canvas.width=t,this.$width=t},enumerable:!0,configurable:!0}),r.prototype.onCreate=function(){this.$container.appendChild(this.$canvas)},r.prototype.setContentView=function(t){this.$children=[t],this.piant()},r.prototype.piant=function(){var t=this;this.$children.length<1||(e.paint.Painter.paint(this),requestAnimationFrame(function(){return t.piant()}))},r}(e.event.EventTarget);n.Displayer=r}(e.displayer||(e.displayer={}))}(e||(e={}));!function(t){var e=Date.now();!function(t){var n=function(){function t(){}return Object.defineProperty(t.prototype,"TIME_ORIGIN",{get:function(){return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeStamp",{get:function(){return Date.now()-e},enumerable:!0,configurable:!0}),t}();t.Time=new n}(t.time||(t.time={}))}(e||(e={}));!function(t){!function(e){var n=function(){function e(e,n){this.$NONE=0,this.$CAPTURING_PHASE=1,this.$AT_TARGET=2,this.$BUBBLING_PHASE=3,this.$eventPhase=2,this.$cancelBubble=!1,this.$isTrusted=!1,this.$isStopImmediatePropagation=!1,this.$path=[],this.$initialized=!1,this.$initialized=!0,this.$timeStamp=t.time.Time.timeStamp,this.$composed=!!n.composed,this.$isTrusted=!1,this.$target=null,this.$currentTarget=null,this.initEvent(e,n.bubbles,n.cancelable)}return Object.defineProperty(e.prototype,"type",{get:function(){return this.$type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this.$target},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTarget",{get:function(){return this.$currentTarget},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NONE",{get:function(){return this.$NONE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CAPTURING_PHASE",{get:function(){return this.$CAPTURING_PHASE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AT_TARGET",{get:function(){return this.$AT_TARGET},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BUBBLING_PHASE",{get:function(){return this.$BUBBLING_PHASE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eventPhase",{get:function(){return this.$eventPhase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cancelBubble",{get:function(){return this.$cancelBubble},set:function(t){this.$cancelBubble=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bubbles",{get:function(){return this.$bubbles},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cancelable",{get:function(){return this.$cancelable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultPrevented",{get:function(){return this.$defaultPrevented},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"composed",{get:function(){return this.$composed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeStamp",{get:function(){return this.$timeStamp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTrusted",{get:function(){return this.$isTrusted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.$path},enumerable:!0,configurable:!0}),e.prototype.$setTarget=function(t){this.$target=t},e.prototype.$setCurrentTarget=function(t){this.$currentTarget=t},e.prototype.stopPropagation=function(){this.$cancelBubble=!0},e.prototype.stopImmediatePropagation=function(){this.$cancelBubble=!0,this.$isStopImmediatePropagation=!0},e.prototype.preventDefault=function(){this.$cancelable&&(this.$defaultPrevented=!0)},e.prototype.composedPath=function(){var t=this.path;this.currentTarget;return t},e.prototype.initEvent=function(t,e,n){this.$isTrusted||(this.$type=t,this.$bubbles=!!e,this.$cancelable=!!n)},e}();e.Event=n}(t.event||(t.event={}))}(e||(e={}));!function(e){!function(n){var i=-1/0,r=function(e){function n(){var t=e.call(this)||this;return t.$height=i,t.$width=i,t.contentHeight=0,t.contentWidth=0,t.$children=[],t.$parent=null,t.$displayer=null,t.touchEnabled=!1,t.scaleX=1,t.scaleY=1,t.rotate=0,t.originX=0,t.originY=0,t.$visibility=!0,t}return t(n,e),Object.defineProperty(n.prototype,"MATCH_PARNET",{get:function(){return 1/0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"WRAP_CONTENT",{get:function(){return i},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"x",{get:function(){return this.$x||0},set:function(t){this.$x=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this.$y},set:function(t){this.$y=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"clientX",{get:function(){return this.$x},set:function(t){this.$x=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"clientY",{get:function(){return this.$y},set:function(t){this.$y=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.$height===i?this.contentHeight:this.$height===1/0?(this.parent||this.displayer||{height:0}).height:this.$height},set:function(t){this.$height=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this.$width===i?this.contentWidth:this.$width===1/0?(this.parent||this.displayer||{width:0}).width:this.$width},set:function(t){this.$width=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"children",{get:function(){return this.$children},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return this.$parent},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"displayer",{get:function(){return this.$displayer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visibility",{get:function(){return this.$visibility},set:function(t){this.$visibility=t},enumerable:!0,configurable:!0}),n.prototype.$setParent=function(t){this.$parent=t},n.prototype.onMount=function(){},n.prototype.onUnmount=function(){},n.prototype.onLayout=function(t,e,n,i){},n.prototype.onMeasure=function(t,e){},n.prototype.onDraw=function(t){this.$width!==i&&(t.fillStyle=this.backgroundColor||"transparent",t.fillRect(0,0,this.width,this.height))},n.prototype.onSizeChanged=function(){},n.prototype.dispatchTouchEvent=function(t){return!1},n.prototype.addChild=function(t){if(t.parent)throw new Error;t.$setParent(this),this.$children.push(t)},n.prototype.removeChild=function(t){for(var e=0,n=this.$children,i=n.length;e<i;e++)if(t==n[e])return void this.$children.splice(e,1)},n}(e.event.EventTarget);n.View=r}(e.view||(e.view={}))}(e||(e={}));var e;return function(e){!function(e){var n=function(e){function n(){var t=e.call(this)||this;return t.$text="",t.fontFamily="",t.$size=12,t.$lineCount=0,t.$rows=[],t}return t(n,e),Object.defineProperty(n.prototype,"text",{get:function(){return this.$text},set:function(t){this.$text=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this.$size},set:function(t){this.$size=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lineHeight",{get:function(){return this.$lineHeight||1.5*this.size},set:function(t){this.$lineHeight=t},enumerable:!0,configurable:!0}),n.prototype.onMeasure=function(t,e){if(this.text){var n=this.measureText(this.text).width,i=this.lineHeight;if(this.$width===this.WRAP_CONTENT)this.contentWidth=Math.max(this.contentWidth,n),this.contentHeight=Math.max(this.contentHeight,i),this.$lineCount=1,this.$rows=[this.text];else{var r=this.text.split(""),o=r.shift(),n=0,c=0,u=0,a=[];for(this.$rows=[];o;)n+(c=this.measureText(o).width)<this.width?(n+=c,a.push(o)):(u++,this.$rows.push(a.join("")),n=c,a=[o]),o=r.shift();u++,this.$rows.push(a.join("")),this.contentWidth=u>=1?Math.max(this.contentWidth,this.width):Math.max(this.contentWidth,n),this.$lineCount=u,i*=u,this.contentHeight=Math.max(this.contentHeight,i)}}else this.$lineCount=0},n.prototype.onDraw=function(t){t.textBaseline="middle",t.font=String(this.size)+"px "+this.fontFamily,t.fillStyle=this.color;for(var e=0,n=this.$rows.length;e<n;e++)t.fillText(this.$rows[e],0,this.lineHeight/2+e*this.lineHeight)},n.prototype.measureText=function(t){var e=document.createElement("canvas").getContext("2d");return e.font=String(this.size)+"px "+this.fontFamily,e.measureText(t)},n}(e.View);e.Text=n}(e.view||(e.view={}))}(e||(e={})),e});